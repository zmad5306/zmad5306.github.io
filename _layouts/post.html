---
layout: site
---

<section>
  <h1>{{ page.title }}</h1>

  {% if page.date or page.author %}
  <p class="subdued">
    {% if page.date %} {{ page.date | date: "%B %-d, %Y" }} {% endif %} {% if page.author %} Â· {{
    page.author }} {% endif %}
  </p>
  {% endif %} {{ content }}
</section>

<script type="module">
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";

  document.addEventListener("DOMContentLoaded", () => {
    // 1. Find ```mermaid code blocks rendered by Jekyll
    const codeBlocks = document.querySelectorAll("pre code.language-mermaid");

    codeBlocks.forEach((code) => {
      const pre = code.parentElement; // <pre>
      const parent = pre.parentElement; // usually a <div> or the section

      if (!parent) return;

      // 2. Create a <div class="mermaid"> with the original Mermaid source
      const div = document.createElement("div");
      div.className = "mermaid";
      div.textContent = code.textContent; // keep raw text, not HTML

      // 3. Replace the <pre><code>...</code></pre> with <div class="mermaid">...</div>
      parent.replaceChild(div, pre);
    });

    // 4. Initialize Mermaid and render all .mermaid blocks
    mermaid.initialize({
      startOnLoad: false,
      securityLevel: "loose", // allows <br/> in labels
    });

    mermaid.run({ querySelector: ".mermaid" });
  });
</script>
